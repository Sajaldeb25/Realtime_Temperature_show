<!doctype html>
<html>
  <head>
    <title>Tempareture show</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="script.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <script>
        console.log('Sajal');
        $(function () {
            
            var socket = io.connect("http://localhost:3000");
            // Gets a change whenever the temperature sensor changes and sets it to its element
            socket.on('temperature', function(temperature) {
                //console.log('a user connected');
                $("#termometer").val(temperature + "°C");
            });
            console.log('In the function --> Finding value');
            socket.on('temperature', function(temperature1) {
                // console.log('a user connected');
                $("#termometer1").val(temperature1 + "K");
            });

            socket.on('temperature', function(temperature2) {
                 // console.log('a user connected');
                $("#termometer2").val(temperature2 + "°F");
            });

            $("#light_button").click(function() {
                changeBtnState("#light_button", "#light_status");
                socket.emit('light_status', $("#light_status").val());
                console.log($("#light_button").val());
            });
            socket.on('light_status', function() { changeBtnState("#light_button", "#light_status") });
            

            function changeBtnState(btn, input) {
                var btnClass = $(btn).attr('class');
                var text, state, newBtnClass, oldBtnClass;
                if(btnClass === "btn btn-success") {
                oldBtnClass = 'btn-success';
                newBtnClass = 'btn-danger';
                text = 'off';
                state = "On";
                } else if(btnClass === "btn btn-danger") {
                oldBtnClass = 'btn-danger';
                newBtnClass = 'btn-success';
                text = 'on';
                state = "Off";
                }
                $(btn).removeClass(oldBtnClass);
                $(btn).addClass(newBtnClass);
                
                $(btn).text("Turn " + text);
                console.log(btn + " is " + state);
                $(input).val(state);
            }

        });
    </script>

  </head>
  <body>
      <h2>Temperature</h2>
         <p>
			<label>Temperature in cel: </label>
			<input type="text" id="termometer" readonly style="border:0; color:#0339fc; font-weight:bold; margin: 20px">
        </p>
        <p>
            <label>Temperature in Fer: </label>
            <input type="text" id="termometer1" readonly style="border:0; color:#0339fc; font-weight:bold; margin: 20px">
        </p>

        <p>
            <label>Temperature in kel: </label>
            <input type="text" id="termometer2" readonly style="border:0; color:#0339fc; font-weight:bold; margin: 20px">
        </p>
        <p>
            <label>Light is: </label>
            <input type="text" id="light_status" style="border: 0;color: #0339fc" value="off" ><br>
            <button type="button" class="btn btn-success" id="light_button" href="#">LED ON/OFF</button>
            
         </p>
  </body>
</html>